## 6 практическая

**Кратко:**
Переход на MVVM, перенос состояния экрана в ViewModel и разделение UI и логики.

Суть задания:

### 1 — Зачем нужен MVVM именно сейчас

К этому моменту приложение уже умеет:

* работать с сетью
* кешировать данные
* обрабатывать ошибки

Но вся логика всё ещё, скорее всего, находится рядом с Activity. Это делает экран хрупким: поворот экрана, пересоздание Activity или небольшое усложнение UI быстро приводят к проблемам.

Цель этой практики — перенести состояние и логику экрана в ViewModel и оставить Activity только роль отображения.

### 2 — Создание ViewModel

Для основного экрана приложения необходимо создать ViewModel.

ViewModel должна:

* хранить состояние экрана
* содержать логику загрузки данных
* работать с Repository
* переживать пересоздание Activity

ViewModel **не должна знать о UI**. Она не знает, существует ли Activity, какие там кнопки и как именно отображаются данные.

### 3 — Перенос логики из Activity

Вся логика, связанная с загрузкой данных, кешированием и обработкой ошибок, должна быть перенесена из Activity в ViewModel.

Activity больше не:

* запускает корутины
* решает, откуда брать данные
* хранит состояние экрана

Она только:

* подписывается на состояние
* отображает данные
* передаёт пользовательские действия

### 4 — Состояние экрана

Необходимо описать состояние экрана в явном виде.

Состояние должно включать:

* загрузку
* успешный результат
* ошибку

ViewModel изменяет состояние, UI на него реагирует. Это ключевая идея MVVM, и её важно прочувствовать именно на практике.

### 5 — Подключение ViewModel через Koin

ViewModel должна создаваться через Koin, а не вручную.

Repository прокидывается в ViewModel через конструктор. Activity получает ViewModel из DI-контейнера.

Таким образом:

* зависимости прозрачны
* код становится предсказуемым
* проект готов к масштабированию

### 6 — Обновление UI

UI должен реагировать только на изменения состояния, приходящие из ViewModel.

RecyclerView обновляется при изменении данных, индикаторы загрузки и ошибки показываются на основе текущего состояния.

UI не принимает решений и не содержит логики.

### Критерии приёмки

* Используется паттерн MVVM
* Вся логика экрана вынесена в ViewModel
* Activity не содержит бизнес-логики
* ViewModel работает с Repository
* ViewModel не знает о UI
* Зависимости прокидываются через Koin

### Что прикреплять

zip файл, в котором:

* zip проекта
* README.txt с:

  * ссылкой на git-репозиторий
  * описанием состояния экрана
  * кратким пояснением, что находится в ViewModel
* Скрин структуры проекта с ViewModel
* Скрин экрана приложения
